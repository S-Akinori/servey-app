import{r as u,j as e,W as A,a as M,d as C}from"./app-5ecf105c.js";import{A as P}from"./AuthenticatedLayout-abeece8a.js";import{b as N,R as U,a as f}from"./Box-5478d1ff.js";import{B as x}from"./Button-558f95d1.js";import{g as B,s as k,u as E,b as F,_ as w,d as L,e as W,C as V}from"./Container-6467d92b.js";import{F as G,P as H}from"./FormControl-a7fea203.js";import{a as g}from"./FormGroup-d19de293.js";import{g as I}from"./TransitionGroupContext-6d61b0a6.js";import{T as O,a as X,b as _,c,d as q}from"./TableRow-15e0acda.js";/* empty css            */import"./ApplicationLogo-208d0a89.js";import"./ResponsiveNavLink-8d202d33.js";import"./transition-55d2c7cc.js";import"./NavLink-fba59faa.js";import"./createSvgIcon-cd43fcf6.js";import"./createChainedFunction-0bab83cf.js";import"./useId-41b80942.js";import"./useFormControl-576bc9de.js";import"./ButtonBase-243277fc.js";import"./Typography-2d120dc9.js";import"./extendSxProp-5d93666a.js";function z(r){return B("MuiTableContainer",r)}I("MuiTableContainer",["root"]);const J=["className","component"],K=r=>{const{classes:s}=r;return W({root:["root"]},z,s)},Q=k("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(r,s)=>s.root})({width:"100%",overflowX:"auto"}),Y=u.forwardRef(function(s,n){const l=E({props:s,name:"MuiTableContainer"}),{className:d,component:p="div"}=l,t=F(l,J),o=w({},l,{component:p}),h=K(o);return e.jsx(Q,w({ref:n,as:p,className:L(h.root,d),ownerState:o},t))}),Z=Y,y=(r,s)=>r===0?-1:Math.floor(s*1e3/r)/10;function Ne({auth:r,clientData:s,target:n="all",total:l,answerTotal:d}){const t=new URLSearchParams(window.location.search).get("user_id"),{data:o,setData:h,get:T,post:D}=A({target:n,user_id:t??""}),[v,R]=u.useState([]),[ee,$]=u.useState([]);console.log(d),u.useEffect(()=>{const a=s.data.filter(i=>i.responses.some(b=>b.survey_id==1)),m=s.data.filter(i=>i.responses.some(b=>b.survey_id!=1));R(a),$(m)},[]);const S=a=>{a.preventDefault(),console.log(o),T(route("dashboard",{target:o.target,user_id:o.user_id}))},j=a=>{const m={...o,target:a.target.value};h(m)};return e.jsxs(P,{user:r.user,header:e.jsx("h2",{className:"font-semibold leading-tight",children:r.user.name}),children:[e.jsx(M,{title:r.user.name+"様ダッシュボード"}),e.jsx(V,{className:"py-12",children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"pb-12",children:e.jsx("div",{className:"flex justify-center max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"md:flex items-center px-4 mb-4",children:[e.jsx("div",{className:"md:pr-2 font-bold text-center",children:"回答状況"}),e.jsxs(N,{className:"text-center",children:[y(l,d)!==-1?y(l,d):"-","%"]})]}),e.jsxs("div",{className:"md:flex items-center px-4 mb-4",children:[e.jsx("div",{className:"md:pr-2 font-bold text-center",children:"回答数"}),e.jsxs(N,{className:"text-center",children:[d,"名 / ",l,"名"]})]})]})})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("form",{onSubmit:S,children:e.jsxs(G,{children:[e.jsxs(U,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"female",name:"radio-buttons-group",row:!0,children:[e.jsx(g,{value:"all",control:e.jsx(f,{onChange:j}),checked:o.target==="all",label:"全員"}),e.jsx(g,{value:"no-answer",control:e.jsx(f,{onChange:j}),checked:o.target==="no-answer",label:"未回答"}),e.jsx(g,{value:"answer",control:e.jsx(f,{onChange:j}),checked:o.target==="answer",label:"回答済"})]}),e.jsx("div",{className:"text-center",children:e.jsx(x,{children:"抽出"})})]})})}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{style:{maxWidth:"650px"},className:"mx-auto",children:[e.jsx(Z,{component:H,children:e.jsxs(O,{"aria-label":"simple table",children:[e.jsx(X,{children:e.jsxs(_,{children:[e.jsx(c,{children:"NO."}),e.jsx(c,{children:"従業員ID"}),e.jsx(c,{children:"回答状況"})]})}),e.jsx(q,{children:s&&s.data.map((a,m)=>e.jsxs(_,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(c,{scope:"row",children:s.from+m}),e.jsx(c,{children:a.client_id}),e.jsx(c,{className:v.some(i=>i.id===a.id)?"":"bg-main text-main-cont",children:v.some(i=>i.id===a.id)?"回答済":"未回答"})]},a.id))})]})}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[(s==null?void 0:s.prev_page_url)&&e.jsx(x,{className:"mr-auto",children:e.jsx(C,{href:`/dashboard?target=${n}&page=${s.current_page-1}&${t?`user_id=${t}`:""}`,children:"前へ"})}),(s==null?void 0:s.next_page_url)&&e.jsx(x,{className:"ml-auto",children:e.jsx(C,{href:`/dashboard?target=${n}&page=${s.current_page+1}&${t?`user_id=${t}`:""}`,children:"次へ"})})]})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(x,{children:e.jsx("a",{href:route("download",{target:n,client_user_id:t||r.user.id}),children:"CSVダウンロード"})})})]})})]})}export{Ne as default};
