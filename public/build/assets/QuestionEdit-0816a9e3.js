import{W,j as e,a as S}from"./app-d32edbdc.js";import{B as q}from"./Button-9ea9dc2a.js";import{A as I}from"./AdminAuthenticatedLayout-06d9fa23.js";import{d as A,a as L,g as y}from"./Delete-6421ddd3.js";import{C as B}from"./Container-4d29621e.js";import{T as n,I as E,S as M}from"./TextField-782215c9.js";import{F as R,a as G}from"./FormGroup-b56a60c8.js";import{C as Q}from"./Checkbox-24cd5a1b.js";import{F as $}from"./FormControl-5d3e1a59.js";import{M as m}from"./MenuItem-f1580150.js";/* empty css            */import"./ApplicationLogo-48553c1b.js";import"./ResponsiveNavLink-92a106bf.js";import"./transition-9075760d.js";import"./NavLink-f1989666.js";import"./createSvgIcon-e1c84b26.js";import"./createSvgIcon-b3555e53.js";import"./TransitionGroupContext-aa50d82c.js";import"./debounce-517eeb3c.js";import"./Modal-0fae64d2.js";import"./createChainedFunction-0bab83cf.js";import"./useId-b3d3b703.js";import"./ButtonBase-ec7ce395.js";import"./useFormControl-71209524.js";import"./Typography-7784f584.js";import"./extendSxProp-0bb93aa5.js";const ve=({auth:_,question:r})=>{var h,j,f,v,b,g;const{data:t,setData:o,put:C,processing:N,errors:z,reset:H}=W({title:r.title,description:r.description,type:r.type,scale:r.scale,choices:r.choices,required:!!r.required});console.log(t);const w=a=>{a.preventDefault(),console.log(t),C(route("admin.question.update",{id:r.id}))},u=a=>{const s=a.target.name,i=a.target.value;let l={...t,[s]:i};s==="type"&&i==="scale"?t.scale||(l={...t,[s]:i,scale:{min_text:"",max_text:"",min:1,max:4,step:1}}):s==="type"&&i==="dropdown"&&(t.choices||(l={...t,[s]:i,choices:[{id:y(10),title:"",value:"",order:1}]})),o(l)},k=a=>{const s=a.target.checked,i={...t,required:s};o(i)},x=a=>{const s=a.target.name,i=a.target.value,l=s==null?void 0:s.split("_")[1];if(!l||!t.scale)return;const c={...t,scale:{...t.scale,[l]:i}};o(c)},D=()=>{if(!t.choices)return;const a={...t,choices:[...t.choices,{id:y(10),title:"",value:"",order:t.choices.length+1}]};o(a)},V=a=>{const s=a.currentTarget.id;if(!s||!t.choices)return;const i={...t,choices:t.choices.filter(l=>l.id!=s)};o(i)},p=a=>{const s=a.target.name,i=a.target.value,l=s==null?void 0:s.split("_")[2],c=s==null?void 0:s.split("_")[0];if(!l||!c||!t.choices)return;const T=l==="title"?t.choices.map(d=>d.id==c?{...d,[l]:i,value:i}:d):t.choices.map(d=>d.id==c?{...d,[l]:i}:d),F={...t,choices:T};o(F)};return console.log(t),e.jsxs(I,{user:_.user,header:e.jsxs("h2",{className:"font-semibold leading-tight",children:[(f=(j=(h=r.form)==null?void 0:h.survey)==null?void 0:j.user)==null?void 0:f.company," | ",(g=(b=(v=r.form)==null?void 0:v.survey)==null?void 0:b.user)==null?void 0:g.name," 様"]}),children:[e.jsx(S,{title:"質問編集"}),e.jsxs(B,{className:"py-12",children:[e.jsx("h2",{className:"mb-4",children:"質問編集"}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"title",type:"text",name:"title",defaultValue:t.title,variant:"outlined",label:"質問文",onChange:u,fullWidth:!0,required:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"description",type:"text",name:"description",defaultValue:t.description,variant:"outlined",label:"説明文",onChange:u,fullWidth:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx(R,{children:e.jsx(G,{control:e.jsx(Q,{checked:t.required,onChange:k}),label:"必須項目にする"})})}),e.jsx("div",{className:"mb-4",children:e.jsxs($,{fullWidth:!0,children:[e.jsx(E,{id:"type",children:"質問タイプ"}),e.jsxs(M,{labelId:"type",id:"type",name:"type",value:t.type,label:"質問タイプ",onChange:u,required:!0,children:[e.jsx(m,{value:"text",children:"一行テキスト"}),e.jsx(m,{value:"textarea",children:"複数行テキスト"}),e.jsx(m,{value:"dropdown",children:"ドロップダウン"}),e.jsx(m,{value:"scale",children:"均等目盛り"})]})]})}),t.type==="scale"&&t.scale&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"scale_minText",type:"text",name:"scale_minText",defaultValue:t.scale.min_text,variant:"outlined",label:"最小目盛りのテキスト",onChange:x,fullWidth:!0,required:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"scale_maxText",type:"text",name:"scale_maxText",defaultValue:t.scale.max_text,variant:"outlined",label:"最大目盛りのテキスト",onChange:x,fullWidth:!0,required:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"scale_max",type:"number",name:"scale_max",defaultValue:t.scale.max,variant:"outlined",label:"目盛り数",onChange:x,required:!0})})]}),(t.type==="dropdown"||t.type==="radio")&&e.jsxs("div",{children:[t.choices&&t.choices.map((a,s)=>e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("div",{className:"mr-4",children:["選択肢",s+1]}),e.jsxs("div",{className:"flex",children:[e.jsx(n,{id:a.id+"_choice_title",type:"text",name:a.id+"_choice_title",defaultValue:a.title,variant:"outlined",label:"タイトル",sx:{mr:2},onChange:p,required:!0}),e.jsx(n,{id:a.id+"_choice_value",type:"hidden",name:a.id+"_choice_value",defaultValue:a.value,variant:"outlined",label:"値",sx:{display:"none"},onChange:p}),e.jsx(n,{id:a.id+"_choice_order",type:"number",name:a.id+"_choice_order",defaultValue:a.order,variant:"outlined",label:"順番",onChange:p,required:!0})]}),e.jsx("button",{id:a.id,name:a.id,type:"button",className:"pl-2",onClick:V,children:e.jsx(A,{})})]},a.id)),e.jsxs("button",{className:"mt-4",onClick:D,children:[e.jsx(L,{})," 選択肢追加"]})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(q,{className:"ml-4",disabled:N,children:"保存"})})]})]})]})};export{ve as default};
