import{W,j as e,a as S}from"./app-9c3ef610.js";import{B as q}from"./Button-d6a630c1.js";import{A as I}from"./AdminAuthenticatedLayout-7f9e22b2.js";import{C as A,d as L,a as B,g as y}from"./Delete-e0c91b9e.js";import{C as E}from"./Container-e36eaf75.js";import{T as n,I as M,S as R}from"./TextField-37f52ed8.js";import{a as G,F as Q}from"./FormGroup-7a1eb772.js";import{F as $}from"./FormControl-a14eea09.js";import{M as m}from"./MenuItem-f63063fe.js";/* empty css            */import"./ApplicationLogo-868e9c56.js";import"./ResponsiveNavLink-0a8ac08d.js";import"./transition-5cc57ed6.js";import"./NavLink-b842ab45.js";import"./createSvgIcon-49fe1e36.js";import"./TransitionGroupContext-dae872e9.js";import"./createSvgIcon-7d987271.js";import"./debounce-517eeb3c.js";import"./Modal-6a7995d1.js";import"./ButtonBase-3d239a87.js";import"./Typography-8d888335.js";import"./extendSxProp-d9d19f8c.js";const he=({auth:_,question:r})=>{var p,j,f,v,b,g;const{data:t,setData:o,put:C,processing:N,errors:z,reset:H}=W({title:r.title,description:r.description,type:r.type,scale:r.scale,choices:r.choices,required:!!r.required});console.log(t);const w=a=>{a.preventDefault(),console.log(t),C(route("admin.question.update",{id:r.id}))},u=a=>{const s=a.target.name,i=a.target.value;let l={...t,[s]:i};s==="type"&&i==="scale"?t.scale||(l={...t,[s]:i,scale:{min_text:"",max_text:"",min:1,max:4,step:1}}):s==="type"&&i==="dropdown"&&(t.choices||(l={...t,[s]:i,choices:[{id:y(10),title:"",value:"",order:1}]})),o(l)},k=a=>{const s=a.target.checked,i={...t,required:s};o(i)},x=a=>{const s=a.target.name,i=a.target.value,l=s==null?void 0:s.split("_")[1];if(!l||!t.scale)return;const c={...t,scale:{...t.scale,[l]:i}};o(c)},D=()=>{if(!t.choices)return;const a={...t,choices:[...t.choices,{id:y(10),title:"",value:"",order:t.choices.length+1}]};o(a)},V=a=>{const s=a.currentTarget.id;if(!s||!t.choices)return;const i={...t,choices:t.choices.filter(l=>l.id!=s)};o(i)},h=a=>{const s=a.target.name,i=a.target.value,l=s==null?void 0:s.split("_")[2],c=s==null?void 0:s.split("_")[0];if(!l||!c||!t.choices)return;const T=l==="title"?t.choices.map(d=>d.id==c?{...d,[l]:i,value:i}:d):t.choices.map(d=>d.id==c?{...d,[l]:i}:d),F={...t,choices:T};o(F)};return console.log(t),e.jsxs(I,{user:_.user,header:e.jsxs("h2",{className:"font-semibold leading-tight",children:[(f=(j=(p=r.form)==null?void 0:p.survey)==null?void 0:j.user)==null?void 0:f.company," | ",(g=(b=(v=r.form)==null?void 0:v.survey)==null?void 0:b.user)==null?void 0:g.name," 様"]}),children:[e.jsx(S,{title:"管理者ページ"}),e.jsxs(E,{className:"py-12",children:[e.jsx("h2",{className:"mb-4",children:"質問編集"}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"title",type:"text",name:"title",defaultValue:t.title,variant:"outlined",label:"質問文",onChange:u,fullWidth:!0,required:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"description",type:"text",name:"description",defaultValue:t.description,variant:"outlined",label:"説明文",onChange:u,fullWidth:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx(G,{children:e.jsx(Q,{control:e.jsx(A,{checked:t.required,onChange:k}),label:"必須項目にする"})})}),e.jsx("div",{className:"mb-4",children:e.jsxs($,{fullWidth:!0,children:[e.jsx(M,{id:"type",children:"質問タイプ"}),e.jsxs(R,{labelId:"type",id:"type",name:"type",value:t.type,label:"質問タイプ",onChange:u,required:!0,children:[e.jsx(m,{value:"text",children:"一行テキスト"}),e.jsx(m,{value:"textarea",children:"複数行テキスト"}),e.jsx(m,{value:"dropdown",children:"ドロップダウン"}),e.jsx(m,{value:"scale",children:"均等目盛り"})]})]})}),t.type==="scale"&&t.scale&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"scale_minText",type:"text",name:"scale_minText",defaultValue:t.scale.min_text,variant:"outlined",label:"最小目盛りのテキスト",onChange:x,fullWidth:!0,required:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"scale_maxText",type:"text",name:"scale_maxText",defaultValue:t.scale.max_text,variant:"outlined",label:"最大目盛りのテキスト",onChange:x,fullWidth:!0,required:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"scale_max",type:"number",name:"scale_max",defaultValue:t.scale.max,variant:"outlined",label:"目盛り数",onChange:x,required:!0})})]}),(t.type==="dropdown"||t.type==="radio")&&e.jsxs("div",{children:[t.choices&&t.choices.map((a,s)=>e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("div",{className:"mr-4",children:["選択肢",s+1]}),e.jsxs("div",{className:"flex",children:[e.jsx(n,{id:a.id+"_choice_title",type:"text",name:a.id+"_choice_title",defaultValue:a.title,variant:"outlined",label:"タイトル",sx:{mr:2},onChange:h,required:!0}),e.jsx(n,{id:a.id+"_choice_value",type:"hidden",name:a.id+"_choice_value",defaultValue:a.value,variant:"outlined",label:"値",sx:{display:"none"},onChange:h}),e.jsx(n,{id:a.id+"_choice_order",type:"number",name:a.id+"_choice_order",defaultValue:a.order,variant:"outlined",label:"順番",onChange:h,required:!0})]}),e.jsx("button",{id:a.id,name:a.id,type:"button",className:"pl-2",onClick:V,children:e.jsx(L,{})})]},a.id)),e.jsxs("button",{className:"mt-4",onClick:D,children:[e.jsx(B,{})," 選択肢追加"]})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(q,{className:"ml-4",disabled:N,children:"保存"})})]})]})]})};export{he as default};
