import{W as S,j as e,a as k}from"./app-68050979.js";import{B as I}from"./Button-9e76dcf7.js";import{A}from"./AdminAuthenticatedLayout-4b6bf22d.js";import{d as F,a as B,g as _}from"./Delete-3b2804d9.js";import{C as E}from"./Container-0e95935a.js";import{T as n,I as L,S as M}from"./TextField-1c1b26d2.js";import{F as R}from"./FormControl-554ab2d5.js";import{M as m}from"./MenuItem-ca5f9989.js";/* empty css            */import"./ApplicationLogo-8afda6e7.js";import"./ResponsiveNavLink-89c15b17.js";import"./transition-950ae369.js";import"./NavLink-a106a817.js";import"./createSvgIcon-faf76e11.js";import"./createSvgIcon-2d4d45c8.js";import"./TransitionGroupContext-d19eaafc.js";import"./debounce-517eeb3c.js";import"./Modal-9888700a.js";import"./ButtonBase-d60102d8.js";const ne=({auth:g,question:r})=>{var h,j,f,v,b,y;const{data:t,setData:c,put:C,processing:N,errors:q,reset:Q}=S({title:r.title,description:r.description,type:r.type,scale:r.scale,choices:r.choices}),w=a=>{a.preventDefault(),console.log(t),C(route("admin.question.update",{id:r.id}))},u=a=>{const s=a.target.name,i=a.target.value;let l={...t,[s]:i};s==="type"&&i==="scale"?t.scale||(l={...t,[s]:i,scale:{min_text:"",max_text:"",min:1,max:4,step:1}}):s==="type"&&i==="dropdown"&&(t.choices||(l={...t,[s]:i,choices:[{id:_(10),title:"",value:"",order:1}]})),c(l)},x=a=>{const s=a.target.name,i=a.target.value,l=s==null?void 0:s.split("_")[1];if(!l||!t.scale)return;const o={...t,scale:{...t.scale,[l]:i}};c(o)},V=()=>{if(!t.choices)return;const a={...t,choices:[...t.choices,{id:_(10),title:"",value:"",order:t.choices.length+1}]};c(a)},D=a=>{const s=a.currentTarget.id;if(!s||!t.choices)return;const i={...t,choices:t.choices.filter(l=>l.id!=s)};c(i)},p=a=>{const s=a.target.name,i=a.target.value,l=s==null?void 0:s.split("_")[2],o=s==null?void 0:s.split("_")[0];if(!l||!o||!t.choices)return;const T=l==="title"?t.choices.map(d=>d.id==o?{...d,[l]:i,value:i}:d):t.choices.map(d=>d.id==o?{...d,[l]:i}:d),W={...t,choices:T};c(W)};return console.log(t),e.jsxs(A,{user:g.user,header:e.jsxs("h2",{className:"font-semibold leading-tight",children:[(f=(j=(h=r.form)==null?void 0:h.survey)==null?void 0:j.user)==null?void 0:f.company," | ",(y=(b=(v=r.form)==null?void 0:v.survey)==null?void 0:b.user)==null?void 0:y.name," 様"]}),children:[e.jsx(k,{title:"管理者ページ"}),e.jsxs(E,{className:"py-12",children:[e.jsx("h2",{className:"mb-4",children:"質問編集"}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"title",type:"text",name:"title",defaultValue:t.title,variant:"outlined",label:"質問文",onChange:u,fullWidth:!0,required:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"description",type:"text",name:"description",defaultValue:t.description,variant:"outlined",label:"説明文",onChange:u,fullWidth:!0})}),e.jsx("div",{className:"mb-4",children:e.jsxs(R,{fullWidth:!0,children:[e.jsx(L,{id:"type",children:"質問タイプ"}),e.jsxs(M,{labelId:"type",id:"type",name:"type",value:t.type,label:"質問タイプ",onChange:u,required:!0,children:[e.jsx(m,{value:"text",children:"一行テキスト"}),e.jsx(m,{value:"textarea",children:"複数行テキスト"}),e.jsx(m,{value:"dropdown",children:"ドロップダウン"}),e.jsx(m,{value:"scale",children:"均等目盛り"})]})]})}),t.type==="scale"&&t.scale&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"scale_minText",type:"text",name:"scale_minText",defaultValue:t.scale.min_text,variant:"outlined",label:"最小目盛りのテキスト",onChange:x,fullWidth:!0,required:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"scale_maxText",type:"text",name:"scale_maxText",defaultValue:t.scale.max_text,variant:"outlined",label:"最大目盛りのテキスト",onChange:x,fullWidth:!0,required:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx(n,{id:"scale_max",type:"number",name:"scale_max",defaultValue:t.scale.max,variant:"outlined",label:"目盛り数",onChange:x,required:!0})})]}),(t.type==="dropdown"||t.type==="radio")&&e.jsxs("div",{children:[t.choices&&t.choices.map((a,s)=>e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("div",{className:"mr-4",children:["選択肢",s+1]}),e.jsxs("div",{className:"flex",children:[e.jsx(n,{id:a.id+"_choice_title",type:"text",name:a.id+"_choice_title",defaultValue:a.title,variant:"outlined",label:"タイトル",sx:{mr:2},onChange:p,required:!0}),e.jsx(n,{id:a.id+"_choice_value",type:"hidden",name:a.id+"_choice_value",defaultValue:a.value,variant:"outlined",label:"値",sx:{display:"none"},onChange:p}),e.jsx(n,{id:a.id+"_choice_order",type:"number",name:a.id+"_choice_order",defaultValue:a.order,variant:"outlined",label:"順番",onChange:p,required:!0})]}),e.jsx("button",{id:a.id,name:a.id,type:"button",className:"pl-2",onClick:D,children:e.jsx(F,{})})]},a.id)),e.jsxs("button",{className:"mt-4",onClick:V,children:[e.jsx(B,{})," 選択肢追加"]})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(I,{className:"ml-4",disabled:N,children:"保存"})})]})]})]})};export{ne as default};
