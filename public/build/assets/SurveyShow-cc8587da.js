import{W as y,r as T,j as e}from"./app-b4c96b35.js";import{T as m}from"./Title-befc2907.js";import{B as b,R as w,a as n}from"./Box-a49c1ef6.js";import{C as B}from"./ClientAuthenticatedLayout-89ddf5dd.js";import{A as C}from"./ApplicationLogo-3d9a7c29.js";import{B as A}from"./Button-b4d899ee.js";import{C as F}from"./Container-21f0d236.js";import{F as h}from"./FormControl-4e51184e.js";import{F as x}from"./FormGroup-dda68e9c.js";import{T as _,S}from"./TextField-42a544b7.js";import{M as k}from"./MenuItem-a7a85193.js";/* empty css            */import"./createSvgIcon-e9a54f28.js";import"./TransitionGroupContext-2bc57edc.js";import"./createChainedFunction-0bab83cf.js";import"./useId-4b8cf4f2.js";import"./ResponsiveNavLink-75dfb6be.js";import"./transition-03762b3c.js";import"./useFormControl-dc0ae208.js";import"./ButtonBase-2a5e3b3e.js";import"./Typography-896a6035.js";import"./extendSxProp-55469d57.js";import"./Modal-db32993a.js";import"./debounce-517eeb3c.js";const f=(c,l)=>{let d={};return c?c.answers.map(i=>{d["q_"+i.question_id]=i.value}):l.forms.map(i=>{i.questions.map(a=>{d["q_"+a.id]=""})}),d},re=({auth:c,survey:l,response:d,flash:i})=>{const{data:a,setData:p,post:v,put:g,processing:u,errors:D,reset:P}=y(f(d,l));console.log(c.user);const s=r=>{const t=r.target.name,j=r.target.value;let o={...a,[t]:j};p(o)};T.useEffect(()=>{p(f(d,l))},[l.id]);const N=r=>{r.preventDefault(),console.log(a),d?g(route("client.survey.update",{survey_id:l.id})):v(route("client.survey.store",{survey_id:l.id}))};return e.jsx(B,{user:c.user,children:e.jsx(F,{className:"py-12",children:e.jsxs("div",{children:[i&&e.jsx("div",{className:"bg-green-200 text-green-600 p-4 mb-4 rounded",children:i.message}),!i&&e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(C,{width:70,height:70,className:"mx-auto"}),e.jsx(m,{Tag:"h1",title:l.title})]}),l.forms.map(r=>e.jsxs("div",{children:[e.jsx(m,{title:r.title,Tag:"h3",className:"p-4 mb-4 bg-main text-main-cont"}),e.jsx("div",{children:r.questions.map((t,j)=>e.jsxs("div",{className:"mb-16",children:[t.type==="scale"&&t.scale&&e.jsxs("div",{children:[e.jsx(m,{title:t.title+"*",Tag:"h4",className:"py-4 mb-4 border-b-2 border-main"}),e.jsxs("div",{className:"mb-20",children:[e.jsxs("div",{className:"md:flex justify-between",children:[e.jsxs(b,{children:["A: ",t.scale.min_text]}),e.jsxs(b,{children:["B: ",t.scale.max_text]})]}),e.jsx(h,{sx:{width:"100%"},required:!0,children:e.jsxs(w,{row:!0,"aria-labelledby":"demo-form-control-label-placement",name:"position",defaultValue:"top",sx:{justifyContent:"space-between"},children:[e.jsx(x,{value:"1",control:e.jsx(n,{onChange:s}),label:"Aに近い",labelPlacement:"bottom",id:"q_"+t.id,name:"q_"+t.id,checked:a["q_"+t.id]==="1"}),e.jsx(x,{value:"2",control:e.jsx(n,{onChange:s}),label:"Aにやや近い",labelPlacement:"bottom",id:"q_"+t.id,name:"q_"+t.id,checked:a["q_"+t.id]==="2"}),e.jsx(x,{value:"3",control:e.jsx(n,{onChange:s}),label:"Bにやや近い",labelPlacement:"bottom",id:"q_"+t.id,name:"q_"+t.id,checked:a["q_"+t.id]==="3"}),e.jsx(x,{value:"4",control:e.jsx(n,{onChange:s}),label:"Bに近い",labelPlacement:"bottom",id:"q_"+t.id,name:"q_"+t.id,checked:a["q_"+t.id]==="4"})]})})]})]}),t.type==="text"&&e.jsxs("div",{children:[e.jsx(m,{title:t.title+"*",Tag:"h4",className:"py-4 mb-4 border-b-2 border-main"}),e.jsx(_,{id:"q_"+t.id,type:"text",name:"q_"+t.id,defaultValue:a["q_"+t.id],variant:"outlined",onChange:s,fullWidth:!0,required:!0})]}),t.type==="textarea"&&e.jsxs("div",{children:[e.jsx(m,{title:t.title+"*",Tag:"h4",className:"py-4 mb-4 border-b-2 border-main"}),e.jsx(_,{id:"q_"+t.id,type:"text",name:"q_"+t.id,defaultValue:a["q_"+t.id],variant:"outlined",onChange:s,fullWidth:!0,multiline:!0,rows:4,required:!0}),e.jsxs("div",{children:[a["q_"+t.id]?a["q_"+t.id].length:0,"文字"]})]}),t.type==="dropdown"&&t.choices&&e.jsxs("div",{children:[e.jsx(m,{title:t.title+"*",Tag:"h4",className:"py-4 mb-4 border-b-2 border-main"}),e.jsx(h,{fullWidth:!0,children:e.jsx(S,{labelId:"type",id:"q_"+t.id,name:"q_"+t.id,value:a["q_"+t.id],onChange:s,children:t.choices.map((o,R)=>e.jsx(k,{value:o.value,children:o.title},o.id))})})]})]},t.id))})]},r.id))]}),e.jsx("div",{className:"text-center",children:e.jsxs(A,{className:"ml-4",disabled:u,children:[l.id===1&&"回答",l.id!==1&&"回答して次へ"]})})]})]})})})};export{re as default};
